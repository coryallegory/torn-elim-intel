<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Torn Elimination Intel</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app-container">

        <section id="meta-section" class="panel grouped-panel">

            <!-- API Key+User Box -->
            <div id="apikey-box">
                <h2>Torn Public API Key</h2>
                <div class="apikey-row">
                    <input type="text" id="apikey-input" placeholder="Enter API key">
                    <button id="apikey-apply">Apply</button>
                    <span id="apikey-status" class="status-text status-error inline-status">No API key loaded</span>
                </div>

                <h3>FFScouter API Key (optional)</h3>
                <div class="apikey-row">
                    <input type="text" id="ffapikey-input" placeholder="Enter FFScouter API key">
                    <button id="ffapikey-apply">Apply</button>
                    <span id="ffapikey-status" class="status-text status-error inline-status">Not configured</span>
                </div>

                <div id="userinfo-box" class="userinfo-box hidden">
                    <div id="user-info-content"></div>
                </div>
            </div>

            <!-- TEAM LIST -->
            <div id="team-container">
                <h2>Teams</h2>
                <table id="team-table">
                    <thead>
                        <tr>
                            <th data-col="id">ID</th>
                            <th data-col="name">Name</th>
                            <th data-col="participants">Participants</th>
                            <th data-col="score">Score</th>
                            <th data-col="wins">Wins</th>
                            <th data-col="losses">Losses</th>
                            <th data-col="lives">Lives</th>
                            <th data-col="position">Position</th>
                            <th data-col="eliminated">Eliminated</th>
                        </tr>
                    </thead>

                    <tbody id="team-table-body"></tbody>
                </table>
            </div>

            <!-- Shared metadata refresh indicator -->
            <div class="refresh-indicator top-right">
                <span id="metadata-refresh-icon" class="spinner hidden"></span>
                <span id="metadata-refresh-timer">Next refresh: --</span>
            </div>
        </section>

        <!-- PLAYER LIST + FILTERS -->
        <section id="player-section" class="panel">

            <h2>Team Players</h2>

            <div id="team-data-refresh-box" class="refresh-indicator top-right">
                <span id="team-refresh-icon" class="spinner hidden"></span>
                <span id="team-refresh-timer">Next refresh: --</span>
            </div>

            <!-- Filters -->
            <div id="player-filters">
                <label class="range-label">Level:
                    <input type="number" id="level-min" class="range-input" value="0">
                    to
                    <input type="number" id="level-max" class="range-input" value="100">
                </label>

                <label class="range-label">BStats:
                    <input type="text" id="bs-min" class="range-input" placeholder="min">
                    to
                    <input type="text" id="bs-max" class="range-input" placeholder="max">
                </label>

                <label>
                    <input type="checkbox" id="filter-okay-only"> "Okay" only
                </label>

                <label>
                    Location:
                    <select id="location-filter">
                        <option value="all">All</option>
                    </select>
                </label>
            </div>

            <table id="player-table">
                <thead>
                    <tr>
                        <th data-col="id">ID</th>
                        <th data-col="name">Name</th>
                        <th data-col="level">Level</th>
                        <th data-col="status">Status</th>
                        <th data-col="last_action">Last Action</th>
                        <th data-col="attacks">Attacks</th>
                        <th data-col="bs_estimate_human">Est Battlestats</th>
                        <th class="hidden raw-data-column">Raw Data</th>
                    </tr>
                </thead>
                <tbody id="player-table-body"></tbody>
            </table>
        </section>

    </div>

    <script src="js/api.js"></script>
    <script src="js/state.js"></script>
    <script src="js/app.js"></script>

</body>
</html>
